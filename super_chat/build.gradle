/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our Samples at https://docs.gradle.org/9.0.0/samples
 */

// build.gradle

subprojects {
    apply plugin: 'java'
    repositories {
        mavenCentral()
    }
}

project(':client') {
    dependencies {
        implementation project(':common')
    }
    jar {
        manifest {
            attributes('Main-Class': 'Client')
        }
    }
}

project(':server') {
    dependencies {
        implementation project(':common')
        implementation 'com.google.code.gson:gson:2.10.1'
    }

    // --- BLOQUE NUEVO Y MODIFICADO ---
    // Esta configuraci√≥n crea un "Fat JAR" para el servidor.
    jar {
        // Primero, definimos el manifest para que sea ejecutable.
        manifest {
            attributes('Main-Class': 'Server')
        }
        // Segundo, le decimos que incluya todas las dependencias necesarias.
        from {
            configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
        }
    }
    // --- FIN DEL BLOQUE NUEVO Y MODIFICADO ---
}

project(':common') {
}